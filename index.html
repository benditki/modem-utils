<!DOCTYPE html>
<html>
    <head>
    <meta charset="UTF-8">
    <title>Modem Utils</title>
    
    <link rel="stylesheet" href="style.css">
    <script src="funcs.js"></script>
    </head>

    <body>

    <div id="container"></div>
 
    <script id='header-tpl' type='text/ractive'>

    <nav class="back"></nav>
    <nav>
        <h1><span class="A">.</span><span class="B">M</span><span class="C">U</span><span class="D">.</span></h1>
        <!--{{#each sections}}
        <a on-click="{{['show', name]}}" class="{{active? 'active': ''}}"><i>{{icon}}</i>{{name}}</a>
        {{/each}}-->
        <a onclick="show('modem')" class="active"><i>&#xe61e;</i>Modem</a>
        <a onclick="show('cloud')"><i>&#xe66a;</i>Cloud</a>
        <a onclick="show('certificates')"><i>&#xe62e;</i>Certificates</a>
    </nav>

    <header id="header">
        <button on-click=['scan_ports']><i>&#xe6c2;</i>Scan</button>
        
        {{#if ports}}
        <div id="ports-wrap" class="select-wrap">
        <select id="ports" value="{{selected_port}}">
        {{#each ports}}
            <option value="{{comName}}">{{comName + ": " + manufacturer + (serialNumber ? "-" + serialNumber : "")}}</option>
        {{/each}}
        </select>
        </div>
        
        {{#if connecting}}
        <button on-click="['abort']"><i>&#xe681;</i>Abort</button>
        {{elseif connected_port != selected_port}}
        <button on-click="['connect', selected_port]"><i>&#xe624;</i>Connect</button>
        {{elseif connected_port}}
        <button on-click="['disconnect']"><i>&#xe681;</i>Disconn</button>
        <button on-click="['connect', connected_port]"><i>&#xe61c;</i>Reconn</button>
        {{/if}}
        
        {{else}}
        No ports discovered
        {{/if}}
        
        {{#if scan_error}}{{scan_error.message}}{{/if}}
    </header>

    <main>
        <section id="modem" class="active">
            <h1>Modem configuration and state</h1>
            {{#if connected_port}}
            <table>
            <tr><th colspan="2">Modem parameters</th></tr>
            <tr><td>Model:</td><td>{{modem.model}}</td></tr>
            <tr><td>SN:</td><td>{{modem.sn}}</td></tr>
            <tr><th colspan="2">SIM card</th></tr>
            {{#if sim}}
            <tr><td>ID:</td><td>{{sim.id}}</td></tr>
            <tr><th colspan="2">Network</th></tr>
            <tr><td>Operator</td><td>{{operator}}</td>
            <tr><td>Type</td><td>{{network}}</td>
            {{else}}
            <tr><td colspan="2">no SIM is inserted</td></tr>
            {{/if}}
            <tr><td></td><td></td></tr>
            </table>
            {{/if}}
        </section>
        <section id="cloud"><h1>Cloud connectivity tests</h1></section>
        <section id="certificates"><h1>Certificate tests</h1></section>
    </main>
    
    <footer>
        <div id="log"></div>
    </footer>
    
    <div id="grid"></div>
    <button id="grid-toggle">##</button>

    </script>
    

    </body>

    <script>
    require('./renderer.js')
    </script>
</html>
